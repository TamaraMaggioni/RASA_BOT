#rules
version: "3.1"

rules:
- rule: mostrar_menu_al_inicio_si_horario_valido
  steps:
  - intent: saludar  # O cualquier otro intent que inicie la conversaci√≥n
  - action: action_check_horario
  - slot_was_set:
    - horario_valido: True
  - action: utter_menu_opciones 

- rule: Activar_form
  steps:
  - or:
    - intent: solicitar_turno
    - intent: modificar_turno
    - intent: cancelar_turno
  - action: utter_pedir_datos
  - action: pedir_datos_paciente_form
  - active_loop: pedir_datos_paciente_form

- rule: Desactivar_form
  condition:
  - active_loop: pedir_datos_paciente_form
  steps: 
  - action: pedir_datos_paciente_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_slot_values

- rule: volver_atras
  steps:
  - intent: volver_atras
  - action: utter_menu_opciones

- rule: volver_al_inicio
  steps:
  - intent: volver_al_inicio
  - action: action_restart

- rule: finalizar_conversacion
  steps:
  - intent: finalizar_conversacion
  - action: utter_despedirse

